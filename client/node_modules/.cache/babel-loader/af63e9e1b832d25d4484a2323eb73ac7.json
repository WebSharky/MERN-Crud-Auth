{"ast":null,"code":"import { createSlice, nanoid, createAsyncThunk } from \"@reduxjs/toolkit\";\nimport postsService from \"./postsService\";\nimport { toast } from 'react-toastify';\nconst initialState = {\n  posts: [],\n  userPosts: [],\n  status: 'idle',\n  error: null,\n  createPostStatus: 'idle'\n};\nexport const fetchPosts = createAsyncThunk('posts/fetchPosts', async (_, thunkAPI) => {\n  try {\n    return await postsService.getAllPosts();\n  } catch (error) {\n    const message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n    return thunkAPI.rejectWithValue(message);\n  }\n});\nexport const addNewPost = createAsyncThunk('posts/addNewPost', async (postData, thunkAPI) => {\n  try {\n    const token = thunkAPI.getState().users.user.token;\n    return await postsService.createPost(postData, token);\n  } catch (error) {\n    const message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n    return thunkAPI.rejectWithValue(message);\n  }\n});\nexport const fetchPostsByUser = createAsyncThunk('posts/fetchPostsByUser', async (req, res, thunkAPI) => {\n  const {\n    nickname\n  } = req;\n\n  try {\n    return await postsService.getPostsByUser(nickname);\n  } catch (error) {\n    const message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n    return thunkAPI.rejectWithValue(message);\n  }\n});\nexport const deleteOwnedPost = createAsyncThunk(\"posts/deleteOwnedPost\", async (id, thunkAPI, rejectWithValue) => {\n  try {\n    const token = thunkAPI.getState().users.user.token;\n    toast.success(\"Chosen post has been deleted\");\n    return await postsService.deleteOwnedPost(id, token);\n  } catch (error) {\n    const message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n    return thunkAPI.rejectWithValue(message);\n  }\n});\nexport const updateOwnedPost = createAsyncThunk(\"posts/updateOwnedPost\", async (postData, thunkAPI) => {\n  const id = postData._id;\n\n  try {\n    const token = thunkAPI.getState().users.user.token;\n    const response = await postsService.updatePost(postData, id, token);\n    toast.success(`Post ${id} has been updated successfully`);\n    return response.data;\n  } catch (error) {\n    const message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n    return thunkAPI.rejectWithValue(message);\n  }\n});\nexport const likePost = createAsyncThunk(\"post/likePost\", async (req, thunkAPI) => {\n  const {\n    id,\n    nickname\n  } = req;\n\n  try {\n    const token = thunkAPI.getState().users.user.token;\n    const response = await postsService.likePost({\n      id,\n      nickname,\n      token\n    });\n    return response.data;\n  } catch (error) {\n    const message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n    return thunkAPI.rejectWithValue(message);\n  }\n});\nexport const dislikePost = createAsyncThunk(\"post/dislikePost\", async (req, thunkAPI) => {\n  const {\n    id,\n    nickname\n  } = req;\n\n  try {\n    const token = thunkAPI.getState().users.user.token;\n    const response = await postsService.dislikePost({\n      id,\n      nickname,\n      token\n    });\n    return response.data;\n  } catch (error) {\n    const message = error.response && error.response.data && error.response.data.message || error.message || error.toString();\n    return thunkAPI.rejectWithValue(message);\n  }\n});\nconst postsSlice = createSlice({\n  name: 'posts',\n  initialState,\n  reducers: {\n    // spróbuj wykasować post added\n    postAdded: {\n      reducer(state, action) {\n        state.posts.concat([action.payload]);\n      },\n\n      prepare(title, text, image, author) {\n        return {\n          payload: {\n            _id: nanoid(),\n            title,\n            text,\n            author,\n            image,\n            createdAt: new Date().toISOString()\n          }\n        };\n      }\n\n    }\n  },\n\n  extraReducers(builder) {\n    builder //fetchPosts\n    .addCase(fetchPosts.pending, (state, action) => {\n      state.status = 'loading';\n    }).addCase(fetchPosts.fulfilled, (state, action) => {\n      state.status = 'succeeded';\n      const loadedPosts = action.payload;\n      state.posts = state.posts.concat(loadedPosts);\n    }).addCase(fetchPosts.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.error.message;\n    }) //addNewPost\n    .addCase(addNewPost.pending, (state, action) => {\n      state.createPostStatus = 'loading';\n    }).addCase(addNewPost.fulfilled, (state, action) => {\n      state.createPostStatus = 'succeed';\n      state.posts.push(action.payload);\n    }).addCase(addNewPost.rejected, (state, action) => {\n      state.createPostStatus = 'failed';\n      state.error = action.error.message;\n    }) //fetchPostsByUser\n    .addCase(fetchPostsByUser.pending, (state, action) => {\n      state.status = 'loading';\n    }).addCase(fetchPostsByUser.fulfilled, (state, action) => {\n      state.status = 'succeeded';\n      state.userPosts = action.payload;\n    }).addCase(fetchPostsByUser.rejected, (state, action) => {\n      state.status = 'failed';\n      state.error = action.error.message;\n    }) //Delete post\n    .addCase(deleteOwnedPost.pending, (state, action) => {\n      //zmień createPostStatus na single\n      state.createPostStatus = 'loading';\n    }).addCase(deleteOwnedPost.fulfilled, (state, action) => {\n      state.createPostStatus = 'succeed'; ///    action.payload.data.id     < ===== napraw to żeby było elegancko\n\n      state.posts = state.posts.filter(post => post._id !== action.payload.data.id);\n    }).addCase(deleteOwnedPost.rejected, (state, action) => {\n      state.createPostStatus = 'failed';\n      state.error = action.error.message;\n    }) //updateOwnedPost\n    .addCase(updateOwnedPost.pending, (state, action) => {\n      state.createPostStatus = 'loading';\n      console.log('pending');\n    }).addCase(updateOwnedPost.fulfilled, (state, action) => {\n      state.createPostStatus = 'succeed';\n      const {\n        _id,\n        title,\n        text,\n        image,\n        author,\n        likes,\n        dislikes,\n        likers,\n        dislikers,\n        createdAt\n      } = action.meta.arg;\n      const updatedPost = {\n        title,\n        text,\n        image,\n        author,\n        _id,\n        likes,\n        dislikes,\n        likers,\n        dislikers,\n        createdAt\n      };\n      state.posts = state.posts.map(post => post._id === _id ? updatedPost : post);\n      state.userPosts = state.userPosts.map(userPost => userPost._id === _id ? updatedPost : userPost);\n    }).addCase(updateOwnedPost.rejected, (state, action) => {\n      state.createPostStatus = 'failed';\n      state.loading = false;\n      state.error = action.error.message;\n    }) //likePost\n    .addCase(likePost.pending, (state, action) => {\n      //createPostStatus change on SinglePostStatus\n      state.createPostStatus = 'loading';\n    }).addCase(likePost.fulfilled, (state, action) => {\n      state.createPostStatus = 'succeed';\n      const {\n        id,\n        nickname\n      } = action.meta.arg;\n      console.log(id, nickname);\n      state.posts = state.posts.map(post => post._id === id ? { ...post,\n        likers: [...(post.likers + nickname)],\n        likes: post.likes + 1\n      } : post);\n      state.userPosts = state.userPosts.map(userPost => userPost._id === id ? { ...userPost,\n        likers: [...(userPost.likers + nickname)],\n        likes: userPost.likes + 1\n      } : userPost);\n    }).addCase(likePost.rejected, (state, action) => {\n      state.createPostStatus = 'failed';\n      state.loading = false;\n      state.error = action.error.message;\n    }) // Dislike post\n    .addCase(dislikePost.pending, (state, action) => {\n      //createPostStatus change on SinglePostStatus\n      state.createPostStatus = 'loading';\n    }).addCase(dislikePost.fulfilled, (state, action) => {\n      state.createPostStatus = 'succeed';\n      const {\n        _id,\n        title,\n        text,\n        image,\n        author,\n        likes,\n        dislikes,\n        likers,\n        dislikers\n      } = action.meta.arg;\n      const updatedPost = {\n        title,\n        text,\n        image,\n        author,\n        _id,\n        likes,\n        dislikes,\n        likers,\n        dislikers\n      };\n      state.posts = state.posts.map(post => post._id === _id ? updatedPost : post);\n      state.userPosts = state.userPosts.map(userPost => userPost._id === _id ? updatedPost : userPost);\n    }).addCase(dislikePost.rejected, (state, action) => {\n      state.createPostStatus = 'failed';\n      state.loading = false;\n      state.error = action.error.message;\n    });\n  }\n\n});\nexport const selectAllPosts = state => state.posts.posts;\nexport const selectAllPostsOfUser = state => state.posts.userPosts;\nexport const getPostsStatus = state => state.posts.status;\nexport const getPostsError = state => state.posts.error;\nexport const {\n  postAdded\n} = postsSlice.actions;\nexport default postsSlice.reducer;","map":{"version":3,"names":["createSlice","nanoid","createAsyncThunk","postsService","toast","initialState","posts","userPosts","status","error","createPostStatus","fetchPosts","_","thunkAPI","getAllPosts","message","response","data","toString","rejectWithValue","addNewPost","postData","token","getState","users","user","createPost","fetchPostsByUser","req","res","nickname","getPostsByUser","deleteOwnedPost","id","success","updateOwnedPost","_id","updatePost","likePost","dislikePost","postsSlice","name","reducers","postAdded","reducer","state","action","concat","payload","prepare","title","text","image","author","createdAt","Date","toISOString","extraReducers","builder","addCase","pending","fulfilled","loadedPosts","rejected","push","filter","post","console","log","likes","dislikes","likers","dislikers","meta","arg","updatedPost","map","userPost","loading","selectAllPosts","selectAllPostsOfUser","getPostsStatus","getPostsError","actions"],"sources":["F:/PROJEKTY WWW/MERN_15/client/src/features/posts/postsSlice.js"],"sourcesContent":["import { createSlice, nanoid, createAsyncThunk} from \"@reduxjs/toolkit\"\r\nimport postsService from \"./postsService\"\r\nimport { toast } from 'react-toastify'\r\n\r\n\r\n\r\n\r\nconst initialState = {\r\n   posts: [],\r\n   userPosts: [],\r\n   status: 'idle',\r\n   error: null,\r\n   createPostStatus: 'idle'\r\n}\r\n\r\nexport const fetchPosts = createAsyncThunk(\r\n    'posts/fetchPosts', \r\n    async (_, thunkAPI) => {\r\n    try {\r\n        return await postsService.getAllPosts()\r\n    } catch (error) {\r\n        const message =\r\n          (error.response &&\r\n            error.response.data &&\r\n            error.response.data.message) ||\r\n          error.message ||\r\n          error.toString()\r\n        return thunkAPI.rejectWithValue(message)\r\n      }\r\n})\r\n\r\n\r\nexport const addNewPost = createAsyncThunk(\r\n    'posts/addNewPost',\r\n    async (postData, thunkAPI) => { \r\n      try {\r\n        const token = thunkAPI.getState().users.user.token\r\n        return await postsService.createPost(postData, token)\r\n      } catch (error) {\r\n        const message =\r\n          (error.response &&\r\n            error.response.data &&\r\n            error.response.data.message) ||\r\n          error.message ||\r\n          error.toString()\r\n        return thunkAPI.rejectWithValue(message)\r\n      }\r\n    }\r\n  )\r\n\r\n  export const fetchPostsByUser = createAsyncThunk(\r\n    'posts/fetchPostsByUser',\r\n    async (req, res, thunkAPI) => { \r\n        const { nickname } = req\r\n\r\n      try {\r\n        return await postsService.getPostsByUser(nickname)\r\n      } catch (error) {\r\n        const message =\r\n          (error.response &&\r\n            error.response.data &&\r\n            error.response.data.message) ||\r\n          error.message ||\r\n          error.toString()\r\n        return thunkAPI.rejectWithValue(message)\r\n      }\r\n    }\r\n  )\r\n\r\n  export const deleteOwnedPost = createAsyncThunk(\r\n    \"posts/deleteOwnedPost\",\r\n    async ( id, thunkAPI, rejectWithValue ) => {\r\n      try {\r\n        const token = thunkAPI.getState().users.user.token\r\n        toast.success(\"Chosen post has been deleted\")\r\n        return await postsService.deleteOwnedPost(id, token);\r\n      } catch (error) {\r\n        const message =\r\n          (error.response &&\r\n            error.response.data &&\r\n            error.response.data.message) ||\r\n          error.message ||\r\n          error.toString()\r\n        return thunkAPI.rejectWithValue(message)\r\n      }\r\n    }\r\n  );\r\n\r\n\r\n\r\n\r\n  export const updateOwnedPost = createAsyncThunk(\r\n    \"posts/updateOwnedPost\",\r\n    async ( postData, thunkAPI ) => {\r\n      const id = postData._id\r\n      try {\r\n        const token = thunkAPI.getState().users.user.token\r\n        const response = await postsService.updatePost(postData, id, token);\r\n        toast.success(`Post ${id} has been updated successfully`)\r\n        return response.data\r\n      } catch (error) {\r\n        const message =\r\n          (error.response &&\r\n            error.response.data &&\r\n            error.response.data.message) ||\r\n          error.message ||\r\n          error.toString()\r\n        return thunkAPI.rejectWithValue(message)\r\n      }\r\n    }\r\n  );\r\n\r\n  export const likePost = createAsyncThunk(\r\n    \"post/likePost\",\r\n    async (req, thunkAPI ) => {\r\n      const { id, nickname } = req\r\n      try {\r\n        const token = thunkAPI.getState().users.user.token\r\n        const response = await postsService.likePost({ id, nickname, token});\r\n        return response.data;\r\n      }catch (error) {\r\n          const message =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString()\r\n          return thunkAPI.rejectWithValue(message)\r\n        }\r\n    }\r\n  );\r\n\r\n  export const dislikePost = createAsyncThunk(\r\n    \"post/dislikePost\",\r\n    async (req, thunkAPI ) => {\r\n      const { id, nickname } = req\r\n      try {\r\n        const token = thunkAPI.getState().users.user.token\r\n        const response = await postsService.dislikePost({ id, nickname, token});\r\n        return response.data;\r\n      }catch (error) {\r\n          const message =\r\n            (error.response &&\r\n              error.response.data &&\r\n              error.response.data.message) ||\r\n            error.message ||\r\n            error.toString()\r\n          return thunkAPI.rejectWithValue(message)\r\n        }\r\n    }\r\n  );\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\nconst postsSlice = createSlice({\r\n    name: 'posts',\r\n    initialState,\r\n    reducers: {\r\n        // spróbuj wykasować post added\r\n        postAdded: {\r\n            reducer(state, action) {\r\n                state.posts.concat([action.payload])\r\n                },\r\n            prepare(title, text, image, author) {\r\n                return {\r\n                    payload: {\r\n                    _id: nanoid(),\r\n                    title,\r\n                    text,\r\n                    author,\r\n                    image,\r\n                    createdAt: new Date().toISOString()               \r\n                }\r\n                }\r\n            }\r\n        },\r\n    },\r\n    extraReducers(builder) {\r\n        builder\r\n            //fetchPosts\r\n            .addCase(fetchPosts.pending, (state, action) => {\r\n                state.status = 'loading'\r\n            })\r\n            .addCase(fetchPosts.fulfilled, (state, action) => {\r\n                state.status = 'succeeded'\r\n                \r\n                const loadedPosts = action.payload\r\n                state.posts = state.posts.concat(loadedPosts)\r\n            })\r\n            .addCase(fetchPosts.rejected, (state, action) => {\r\n                state.status = 'failed'\r\n                state.error = action.error.message\r\n            })\r\n            //addNewPost\r\n            .addCase(addNewPost.pending, (state, action) => {\r\n                state.createPostStatus = 'loading'\r\n                \r\n            })\r\n            .addCase(addNewPost.fulfilled, (state, action) => {\r\n                state.createPostStatus = 'succeed'\r\n                    state.posts.push(action.payload)\r\n            })\r\n            .addCase(addNewPost.rejected, (state, action) => {\r\n                state.createPostStatus = 'failed'\r\n                state.error = action.error.message\r\n            })\r\n            \r\n            //fetchPostsByUser\r\n            .addCase(fetchPostsByUser.pending, (state, action) => {\r\n                state.status = 'loading'\r\n            })\r\n            .addCase(fetchPostsByUser.fulfilled, (state, action) => {\r\n                state.status = 'succeeded'\r\n                state.userPosts = action.payload\r\n            })\r\n            .addCase(fetchPostsByUser.rejected, (state, action) => {\r\n                state.status = 'failed'\r\n                state.error = action.error.message\r\n            })\r\n\r\n            //Delete post\r\n            .addCase(deleteOwnedPost.pending, (state, action) => {\r\n              //zmień createPostStatus na single\r\n              state.createPostStatus = 'loading'\r\n              \r\n          })\r\n          .addCase(deleteOwnedPost.fulfilled, (state, action) => {\r\n              state.createPostStatus = 'succeed'\r\n              \r\n\r\n\r\n                  ///    action.payload.data.id     < ===== napraw to żeby było elegancko\r\n                  state.posts = state.posts.filter((post) => post._id !== action.payload.data.id) \r\n                  \r\n          })\r\n          .addCase(deleteOwnedPost.rejected, (state, action) => {\r\n              state.createPostStatus = 'failed'\r\n              state.error = action.error.message\r\n          })\r\n\r\n          //updateOwnedPost\r\n          .addCase(updateOwnedPost.pending, (state, action) => {\r\n            state.createPostStatus = 'loading'\r\n            console.log('pending')\r\n          })\r\n          .addCase(updateOwnedPost.fulfilled, (state, action) => {\r\n            state.createPostStatus = 'succeed'\r\n\r\n            const {_id, title, text, image, author,likes, dislikes, likers, dislikers, createdAt}  = action.meta.arg\r\n            const updatedPost = {\r\n              title,\r\n              text,\r\n              image,\r\n              author,\r\n              _id,\r\n              likes,\r\n              dislikes,\r\n              likers,\r\n              dislikers,\r\n              createdAt\r\n            }\r\n            \r\n            \r\n            state.posts = state.posts.map((post) =>\r\n            post._id === _id ? updatedPost : post)\r\n\r\n            state.userPosts = state.userPosts.map((userPost) =>\r\n            userPost._id === _id ? updatedPost : userPost)\r\n            \r\n          })\r\n          .addCase(updateOwnedPost.rejected, (state, action) => {\r\n            state.createPostStatus = 'failed'\r\n            state.loading = false;\r\n            state.error = action.error.message\r\n          })\r\n          //likePost\r\n          .addCase(likePost.pending, (state, action) => {\r\n            //createPostStatus change on SinglePostStatus\r\n            state.createPostStatus = 'loading'\r\n          \r\n          })\r\n          .addCase(likePost.fulfilled, (state, action) => {\r\n            state.createPostStatus = 'succeed'\r\n\r\n            const {id, nickname}  = action.meta.arg\r\n\r\n            console.log(id, nickname)\r\n            \r\n\r\n            \r\n            \r\n            state.posts = state.posts.map((post) =>\r\n            post._id === id ? {\r\n              ...post,\r\n              likers: [...post.likers + nickname],\r\n              likes: post.likes + 1\r\n            }: post)\r\n\r\n            state.userPosts = state.userPosts.map((userPost) =>\r\n            userPost._id === id ? {\r\n              ...userPost,\r\n              likers: [...userPost.likers + nickname],\r\n              likes: userPost.likes + 1\r\n            } : userPost)\r\n            \r\n          })\r\n          .addCase(likePost.rejected, (state, action) => {\r\n            state.createPostStatus = 'failed'\r\n            state.loading = false;\r\n            state.error = action.error.message\r\n          })\r\n\r\n          // Dislike post\r\n           .addCase(dislikePost.pending, (state, action) => {\r\n            //createPostStatus change on SinglePostStatus\r\n            state.createPostStatus = 'loading'\r\n          \r\n          })\r\n          .addCase(dislikePost.fulfilled, (state, action) => {\r\n            state.createPostStatus = 'succeed'\r\n\r\n            const {_id, title, text, image, author,likes, dislikes, likers, dislikers}  = action.meta.arg\r\n            const updatedPost = {\r\n              title,\r\n              text,\r\n              image,\r\n              author,\r\n              _id,\r\n              likes,\r\n              dislikes,\r\n              likers,\r\n              dislikers\r\n            }\r\n\r\n            \r\n            \r\n            state.posts = state.posts.map((post) =>\r\n            post._id === _id ? updatedPost : post)\r\n\r\n            state.userPosts = state.userPosts.map((userPost) =>\r\n            userPost._id === _id ? updatedPost : userPost)\r\n            \r\n          })\r\n          .addCase(dislikePost.rejected, (state, action) => {\r\n            state.createPostStatus = 'failed'\r\n            state.loading = false;\r\n            state.error = action.error.message\r\n          })\r\n         \r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    }\r\n})\r\n\r\nexport const selectAllPosts = (state) => state.posts.posts\r\nexport const selectAllPostsOfUser = (state) => state.posts.userPosts\r\nexport const getPostsStatus = (state) => state.posts.status\r\nexport const getPostsError = (state) => state.posts.error\r\n\r\nexport const {postAdded} = postsSlice.actions\r\n\r\nexport default postsSlice.reducer"],"mappings":"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"},"metadata":{},"sourceType":"module"}